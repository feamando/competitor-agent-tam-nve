# Test info

- Name: Browser-Specific Feature Tests >> Firefox-specific features >> Firefox form element styling
- Location: /Users/troy.edwards/code/competitor-agent-tam-nve/e2e/browser-specific/browser-quirks.spec.ts:111:9

# Error details

```
TimeoutError: locator.fill: Timeout 15000ms exceeded.
Call log:
  - waiting for locator('[data-testid="product-website"]')

    at /Users/troy.edwards/code/competitor-agent-tam-nve/e2e/browser-specific/browser-quirks.spec.ts:123:26
```

# Page snapshot

```yaml
- navigation:
  - link "CompAI":
    - /url: /
  - link "Dashboard":
    - /url: /
  - link "Chat Agent":
    - /url: /chat
  - link "Projects":
    - /url: /projects
  - link "Competitors":
    - /url: /competitors
  - link "Reports":
    - /url: /reports
  - text: Competitor Research Agent
- main:
  - heading "Create New Project" [level=1]
  - paragraph: Set up your competitive analysis project with immediate report generation
  - heading "Project Basics" [level=2]
  - text: Step 1 of 7
  - paragraph: Start with basic project information
  - text: Project Name *
  - textbox "Project Name *"
  - text: Description
  - textbox "Description"
  - text: Priority
  - combobox "Priority":
    - option "Low"
    - option "Medium" [selected]
    - option "High"
    - option "Urgent"
  - text: Tags
  - textbox "Add a tag"
  - button "Add"
  - button "Previous" [disabled]
  - button "Next" [disabled]
  - paragraph:
    - text: Need help? Check out our
    - link "project creation guide":
      - /url: /help/immediate-reports
    - text: or
    - link "contact support":
      - /url: /support
    - text: .
- alert
- button "Open Next.js Dev Tools":
  - img
```

# Test source

```ts
   23 |   const firefoxOnly = test.extend({});
   24 |   firefoxOnly.describe.configure({ condition: ({ browserName }) => browserName === 'firefox' });
   25 |   
   26 |   const webkitOnly = test.extend({});
   27 |   webkitOnly.describe.configure({ condition: ({ browserName }) => browserName === 'webkit' });
   28 |   
   29 |   // Common tests across all browsers
   30 |   test('Form input validation appearance', async ({ page, browserName }) => {
   31 |     await setupTest(page, '/projects/new');
   32 |     
   33 |     // Test HTML5 form validation (appears differently in browsers)
   34 |     const nameInput = page.locator('[data-testid="project-name"]');
   35 |     await nameInput.click();
   36 |     await nameInput.fill(''); // Empty value
   37 |     
   38 |     // Trigger validation by trying to submit
   39 |     await page.click('[data-testid="create-project"]');
   40 |     await page.waitForTimeout(500); // Wait for validation UI
   41 |     
   42 |     // Screenshot the validation state
   43 |     await compareScreenshot(page, {
   44 |       name: `form-validation-${browserName}`,
   45 |       selector: 'form',
   46 |       maskDynamicContent: true,
   47 |     });
   48 |     
   49 |     // Check if validation message is shown (implementation varies by browser)
   50 |     const isInvalid = await nameInput.evaluate((el: HTMLInputElement) => !el.validity.valid);
   51 |     expect(isInvalid).toBe(true);
   52 |   });
   53 |   
   54 |   test('CSS flexbox layout rendering', async ({ page, browserName }) => {
   55 |     await setupTest(page, '/projects/new');
   56 |     
   57 |     // Test flexbox rendering which can differ between browsers
   58 |     const flexContainer = page.locator('.competitor-list');
   59 |     if (await flexContainer.isVisible()) {
   60 |       await compareScreenshot(page, {
   61 |         name: `flexbox-layout-${browserName}`,
   62 |         selector: '.competitor-list',
   63 |         maskDynamicContent: true,
   64 |       });
   65 |     }
   66 |   });
   67 |   
   68 |   // Browser-specific tests
   69 |   
   70 |   // Chrome-specific tests
   71 |   chromiumOnly.describe('Chrome-specific features', () => {
   72 |     test('Chrome-specific CSS features', async ({ page }) => {
   73 |       await setupTest(page, '/projects/new');
   74 |       
   75 |       // Test Chrome-specific features like ::-webkit-scrollbar
   76 |       await page.addStyleTag({
   77 |         content: `
   78 |           .scrollable-element::-webkit-scrollbar {
   79 |             width: 12px;
   80 |             background-color: #f5f5f5;
   81 |           }
   82 |           .scrollable-element::-webkit-scrollbar-thumb {
   83 |             background-color: #0056b3;
   84 |             border-radius: 6px;
   85 |           }
   86 |         `
   87 |       });
   88 |       
   89 |       // Create a scrollable element for testing
   90 |       await page.evaluate(() => {
   91 |         const div = document.createElement('div');
   92 |         div.className = 'scrollable-element';
   93 |         div.style.height = '100px';
   94 |         div.style.overflow = 'auto';
   95 |         div.innerHTML = '<div style="height: 500px;">Scrollable content</div>';
   96 |         document.body.appendChild(div);
   97 |       });
   98 |       
   99 |       await page.waitForTimeout(500);
  100 |       
  101 |       // Take screenshot of scrollbar styles
  102 |       await compareScreenshot(page, {
  103 |         name: 'chrome-scrollbar',
  104 |         selector: '.scrollable-element',
  105 |       });
  106 |     });
  107 |   });
  108 |   
  109 |   // Firefox-specific tests
  110 |   firefoxOnly.describe('Firefox-specific features', () => {
  111 |     test('Firefox form element styling', async ({ page }) => {
  112 |       await setupTest(page, '/projects/new');
  113 |       
  114 |       // Firefox has different form control styling
  115 |       await compareScreenshot(page, {
  116 |         name: 'firefox-form-controls',
  117 |         selector: 'form',
  118 |       });
  119 |       
  120 |       // Test Firefox-specific form behaviors
  121 |       // Firefox handles some form validations differently
  122 |       const websiteInput = page.locator('[data-testid="product-website"]');
> 123 |       await websiteInput.fill('not-a-valid-url');
      |                          ^ TimeoutError: locator.fill: Timeout 15000ms exceeded.
  124 |       await page.click('[data-testid="create-project"]');
  125 |       
  126 |       await compareScreenshot(page, {
  127 |         name: 'firefox-url-validation',
  128 |         selector: 'form',
  129 |       });
  130 |     });
  131 |   });
  132 |   
  133 |   // Safari-specific tests
  134 |   webkitOnly.describe('Safari-specific features', () => {
  135 |     test('Safari textarea appearance', async ({ page }) => {
  136 |       await setupTest(page, '/projects/new');
  137 |       
  138 |       // Safari renders some form elements differently
  139 |       const textareas = page.locator('textarea');
  140 |       if (await textareas.count() > 0) {
  141 |         await textareas.first().click();
  142 |         await textareas.first().fill('Testing Safari textarea appearance');
  143 |         
  144 |         await compareScreenshot(page, {
  145 |           name: 'safari-textarea',
  146 |           selector: 'textarea',
  147 |         });
  148 |       }
  149 |     });
  150 |     
  151 |     test('Safari position:sticky behavior', async ({ page }) => {
  152 |       await setupTest(page, '/');
  153 |       
  154 |       // Safari has unique sticky positioning behavior
  155 |       await page.addStyleTag({
  156 |         content: `
  157 |           .sticky-test {
  158 |             position: sticky;
  159 |             top: 0;
  160 |             background-color: yellow;
  161 |             padding: 10px;
  162 |             z-index: 100;
  163 |           }
  164 |         `
  165 |       });
  166 |       
  167 |       // Create a test element
  168 |       await page.evaluate(() => {
  169 |         const header = document.createElement('div');
  170 |         header.className = 'sticky-test';
  171 |         header.textContent = 'Sticky Header Test';
  172 |         document.body.insertBefore(header, document.body.firstChild);
  173 |         
  174 |         // Add content to scroll
  175 |         const content = document.createElement('div');
  176 |         content.style.height = '2000px';
  177 |         content.textContent = 'Scrollable content';
  178 |         document.body.appendChild(content);
  179 |       });
  180 |       
  181 |       // Take screenshot before scrolling
  182 |       await compareScreenshot(page, {
  183 |         name: 'safari-sticky-before',
  184 |         selector: 'body',
  185 |       });
  186 |       
  187 |       // Scroll and take another screenshot
  188 |       await page.evaluate(() => window.scrollTo(0, 100));
  189 |       await page.waitForTimeout(500);
  190 |       
  191 |       await compareScreenshot(page, {
  192 |         name: 'safari-sticky-after',
  193 |         selector: 'body',
  194 |       });
  195 |     });
  196 |   });
  197 | });
  198 |
  199 | // Tests for mobile browsers
  200 | test.describe('Mobile Browser Tests', () => {
  201 |   test.beforeEach(async ({ page }) => {
  202 |     // Set viewport to mobile size
  203 |     await page.setViewportSize({ width: 375, height: 667 });
  204 |   });
  205 |   
  206 |   test('Mobile tap behavior on buttons', async ({ page, browserName }) => {
  207 |     await setupTest(page, '/projects/new');
  208 |     
  209 |     // Test tap target sizes
  210 |     const button = page.locator('[data-testid="create-project"]');
  211 |     
  212 |     // Take screenshot before tap
  213 |     await compareScreenshot(page, {
  214 |       name: `mobile-tap-before-${browserName}`,
  215 |       selector: '[data-testid="create-project"]',
  216 |     });
  217 |     
  218 |     // Simulate tap
  219 |     await button.tap();
  220 |     await page.waitForTimeout(300);
  221 |     
  222 |     // Take screenshot during tap effect
  223 |     await compareScreenshot(page, {
```
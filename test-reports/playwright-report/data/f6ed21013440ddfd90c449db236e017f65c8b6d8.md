# Test info

- Name: Phase 5.4: Immediate Reports E2E Tests >> Happy Path User Journey >> should complete full project creation with immediate report generation
- Location: /Users/troy.edwards/code/competitor-agent-tam-nve/e2e/immediateReports.spec.ts:55:9

# Error details

```
Error: browserType.launch: Executable doesn't exist at /Users/troy.edwards/Library/Caches/ms-playwright/webkit-2158/pw_run.sh
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | /**
   2 |  * Phase 5.4: End-to-End Tests for Immediate Comparative Reports
   3 |  * Complete user journey testing with cross-browser compatibility
   4 |  */
   5 |
   6 | import { test, expect, Page, BrowserContext } from '@playwright/test';
   7 | import { logger } from '@/lib/logger';
   8 |
   9 | // Test configuration
   10 | const E2E_CONFIG = {
   11 |   timeouts: {
   12 |     navigation: 30000, // 30 seconds for page navigation
   13 |     reportGeneration: 75000, // 75 seconds for report generation (including retries)
   14 |     elementInteraction: 10000, // 10 seconds for element interactions
   15 |   },
   16 |   retries: {
   17 |     maxAttempts: 3,
   18 |     backoffMs: 2000,
   19 |   },
   20 |   testData: {
   21 |     projectName: `E2E Test Project ${Date.now()}`,
   22 |     productWebsite: 'https://example-e2e-test.com',
   23 |     competitors: [
   24 |       { name: 'E2E Competitor 1', website: 'https://competitor1-e2e.com' },
   25 |       { name: 'E2E Competitor 2', website: 'https://competitor2-e2e.com' }
   26 |     ]
   27 |   },
   28 |   browsers: ['chromium', 'firefox', 'webkit'], // Cross-browser testing
   29 |   viewports: [
   30 |     { width: 1920, height: 1080 }, // Desktop
   31 |     { width: 1366, height: 768 },  // Laptop
   32 |     { width: 768, height: 1024 },  // Tablet
   33 |     { width: 375, height: 667 }    // Mobile
   34 |   ]
   35 | };
   36 |
   37 | test.describe('Phase 5.4: Immediate Reports E2E Tests', () => {
   38 |   let testProjectIds: string[] = [];
   39 |
   40 |   test.beforeAll(async () => {
   41 |     logger.info('Starting E2E tests for immediate reports', {
   42 |       config: E2E_CONFIG
   43 |     });
   44 |   });
   45 |
   46 |   test.afterAll(async () => {
   47 |     // Cleanup test data
   48 |     await cleanupE2ETestData();
   49 |     logger.info('E2E tests completed', {
   50 |       projectsCreated: testProjectIds.length
   51 |     });
   52 |   });
   53 |
   54 |   test.describe('Happy Path User Journey', () => {
>  55 |     test('should complete full project creation with immediate report generation', async ({ page }) => {
      |         ^ Error: browserType.launch: Executable doesn't exist at /Users/troy.edwards/Library/Caches/ms-playwright/webkit-2158/pw_run.sh
   56 |       test.setTimeout(E2E_CONFIG.timeouts.reportGeneration);
   57 |
   58 |       // 1. Navigate to project creation page
   59 |       await page.goto('/projects/new');
   60 |       await expect(page).toHaveTitle(/Create New Project/);
   61 |
   62 |       // 2. Fill project form - handle step-by-step wizard
   63 |       await page.fill('[data-testid="project-name"]', E2E_CONFIG.testData.projectName);
   64 |       
   65 |       // Navigate to product step
   66 |       const nextButton = page.locator('[data-testid="next-button"]');
   67 |       await expect(nextButton).toBeVisible({ timeout: 10000 });
   68 |       await expect(nextButton).toBeEnabled({ timeout: 5000 });
   69 |       await nextButton.click();
   70 |       
   71 |       // Wait for product step and fill information
   72 |       await page.waitForSelector('[data-testid="product-website"]', { timeout: 10000 });
   73 |       await page.fill('[data-testid="product-website"]', E2E_CONFIG.testData.productWebsite);
   74 |
   75 |       // 3. Add competitors
   76 |       for (let i = 0; i < E2E_CONFIG.testData.competitors.length; i++) {
   77 |         const competitor = E2E_CONFIG.testData.competitors[i];
   78 |         
   79 |         if (i > 0) {
   80 |           await page.click('[data-testid="add-competitor"]');
   81 |         }
   82 |         
   83 |         await page.fill(`[data-testid="competitor-name-${i}"]`, competitor.name);
   84 |         await page.fill(`[data-testid="competitor-website-${i}"]`, competitor.website);
   85 |       }
   86 |
   87 |       // 4. Configure immediate report generation
   88 |       await expect(page.locator('[data-testid="generate-initial-report"]')).toBeChecked(); // Default enabled
   89 |       await page.selectOption('[data-testid="report-template"]', 'comprehensive');
   90 |
   91 |       // 5. Submit project creation form
   92 |       await page.click('[data-testid="create-project"]');
   93 |
   94 |       // 6. Wait for redirect to project page
   95 |       await page.waitForURL(/\/projects\/.*/, { 
   96 |         timeout: E2E_CONFIG.timeouts.navigation 
   97 |       });
   98 |
   99 |       // Extract project ID from URL for cleanup
  100 |       const projectId = page.url().split('/projects/')[1]?.split('?')[0] || 'unknown';
  101 |       if (projectId !== 'unknown') {
  102 |         testProjectIds.push(projectId);
  103 |       }
  104 |
  105 |       // 7. Verify immediate report generation indicators
  106 |       await expect(page.locator('[data-testid="initial-report-indicator"]')).toBeVisible({
  107 |         timeout: E2E_CONFIG.timeouts.elementInteraction
  108 |       });
  109 |
  110 |       // 8. Watch real-time progress updates
  111 |       const progressIndicator = page.locator('[data-testid="progress-indicator"]');
  112 |       await expect(progressIndicator).toBeVisible();
  113 |
  114 |       // Verify progress phases
  115 |       await expect(page.locator('[data-testid="phase-validation"]')).toBeVisible();
  116 |       await expect(page.locator('[data-testid="phase-snapshot-capture"]')).toBeVisible({
  117 |         timeout: E2E_CONFIG.timeouts.elementInteraction
  118 |       });
  119 |       
  120 |       // 9. Wait for snapshot capture progress
  121 |       const snapshotProgress = page.locator('[data-testid="snapshot-progress"]');
  122 |       await expect(snapshotProgress).toBeVisible();
  123 |       
  124 |       // Verify competitor snapshot capture status
  125 |       await expect(page.locator('[data-testid="competitor-snapshots-status"]')).toContainText('Capturing');
  126 |
  127 |       // 10. Wait for analysis phase
  128 |       await expect(page.locator('[data-testid="phase-analysis"]')).toBeVisible({
  129 |         timeout: E2E_CONFIG.timeouts.elementInteraction
  130 |       });
  131 |
  132 |       // 11. Wait for report generation completion
  133 |       await expect(page.locator('[data-testid="report-completed"]')).toBeVisible({
  134 |         timeout: E2E_CONFIG.timeouts.reportGeneration
  135 |       });
  136 |
  137 |       // 12. Verify report quality indicators
  138 |       const completenessScore = page.locator('[data-testid="report-completeness-score"]');
  139 |       await expect(completenessScore).toBeVisible();
  140 |       
  141 |       const dataFreshnessIndicator = page.locator('[data-testid="data-freshness-indicator"]');
  142 |       await expect(dataFreshnessIndicator).toBeVisible();
  143 |       await expect(dataFreshnessIndicator).toContainText(/Fresh|New/); // Should use fresh snapshots
  144 |
  145 |       const snapshotCaptureStatus = page.locator('[data-testid="snapshot-capture-status"]');
  146 |       await expect(snapshotCaptureStatus).toBeVisible();
  147 |
  148 |       // 13. Verify report content is accessible
  149 |       await page.click('[data-testid="view-report"]');
  150 |       
  151 |       const reportContent = page.locator('[data-testid="report-content"]');
  152 |       await expect(reportContent).toBeVisible();
  153 |       await expect(reportContent).toContainText('Executive Summary');
  154 |       await expect(reportContent).toContainText('Competitive Analysis');
  155 |
```
# Test info

- Name: Task 8.1: Comprehensive User Journey Validation >> 2. Error Handling & Recovery >> should handle analysis service errors gracefully
- Location: /Users/troy.edwards/code/competitor-agent-tam-nve/e2e/comprehensive-user-journeys.spec.ts:431:9

# Error details

```
Error: browserType.launch: Executable doesn't exist at /Users/troy.edwards/Library/Caches/ms-playwright/firefox-1482/firefox/Nightly.app/Contents/MacOS/firefox
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
  331 |         analysisTime: `${analysisTime}ms`,
  332 |         reportTime: `${reportTime}ms`,
  333 |         pageLoadTime: `${performance.loadTime}ms`,
  334 |         qualityScore: qualityScore
  335 |       });
  336 |     });
  337 |
  338 |     test('should handle concurrent user sessions gracefully', async ({ browser }) => {
  339 |       test.setTimeout(COMPREHENSIVE_E2E_CONFIG.timeouts.workflow);
  340 |       
  341 |       console.log('👥 Testing concurrent user sessions');
  342 |       
  343 |       const sessions = 3;
  344 |       const sessionPromises: Promise<void>[] = [];
  345 |
  346 |       for (let i = 0; i < sessions; i++) {
  347 |         const sessionPromise = (async () => {
  348 |           const context = await browser.newContext();
  349 |           const page = await context.newPage();
  350 |           const sessionHelper = new E2ETestHelper(page);
  351 |           
  352 |           try {
  353 |             await page.goto('/');
  354 |             await sessionHelper.waitForLoadingComplete();
  355 |             
  356 |             // Create unique project for each session
  357 |             const projectName = `${COMPREHENSIVE_E2E_CONFIG.testData.project.name} - Session ${i + 1}`;
  358 |             
  359 |             await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.navigation.projectsTab);
  360 |             await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.project.createButton);
  361 |             
  362 |             await page.fill(COMPREHENSIVE_E2E_CONFIG.selectors.project.nameInput, projectName);
  363 |             await page.fill(COMPREHENSIVE_E2E_CONFIG.selectors.project.productNameInput, 
  364 |               `${COMPREHENSIVE_E2E_CONFIG.testData.project.productName} ${i + 1}`);
  365 |             await page.fill(COMPREHENSIVE_E2E_CONFIG.selectors.project.productWebsiteInput,
  366 |               `https://session-${i + 1}-test.com`);
  367 |             
  368 |             await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.project.saveButton);
  369 |             await sessionHelper.waitForLoadingComplete();
  370 |             
  371 |             // Validate project creation
  372 |             await expect(page.locator(COMPREHENSIVE_E2E_CONFIG.selectors.common.successMessage))
  373 |               .toBeVisible();
  374 |             
  375 |             console.log(`✅ Session ${i + 1} project created successfully`);
  376 |             
  377 |           } finally {
  378 |             await context.close();
  379 |           }
  380 |         })();
  381 |         
  382 |         sessionPromises.push(sessionPromise);
  383 |       }
  384 |
  385 |       // Wait for all sessions to complete
  386 |       await Promise.all(sessionPromises);
  387 |       
  388 |       console.log(`🎉 All ${sessions} concurrent sessions completed successfully`);
  389 |     });
  390 |   });
  391 |
  392 |   test.describe('2. Error Handling & Recovery', () => {
  393 |     test('should handle network errors gracefully', async ({ page, context }) => {
  394 |       console.log('🚨 Testing network error handling');
  395 |       
  396 |       // Start project creation
  397 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.navigation.projectsTab);
  398 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.project.createButton);
  399 |       
  400 |       // Fill project details
  401 |       await page.fill(
  402 |         COMPREHENSIVE_E2E_CONFIG.selectors.project.nameInput,
  403 |         'Network Error Test Project'
  404 |       );
  405 |       
  406 |       // Simulate network failure
  407 |       await context.setOffline(true);
  408 |       
  409 |       // Attempt to save project
  410 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.project.saveButton);
  411 |       
  412 |       // Should show error message
  413 |       await expect(page.locator(COMPREHENSIVE_E2E_CONFIG.selectors.common.errorMessage))
  414 |         .toBeVisible({ timeout: COMPREHENSIVE_E2E_CONFIG.timeouts.apiResponse });
  415 |       
  416 |       const errorMessage = await page.locator(COMPREHENSIVE_E2E_CONFIG.selectors.common.errorMessage)
  417 |         .textContent();
  418 |       expect(errorMessage).toContain('network');
  419 |       
  420 |       // Restore network and retry
  421 |       await context.setOffline(false);
  422 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.project.saveButton);
  423 |       
  424 |       // Should succeed after network recovery
  425 |       await expect(page.locator(COMPREHENSIVE_E2E_CONFIG.selectors.common.successMessage))
  426 |         .toBeVisible({ timeout: COMPREHENSIVE_E2E_CONFIG.timeouts.apiResponse });
  427 |       
  428 |       console.log('✅ Network error recovery validated');
  429 |     });
  430 |
> 431 |     test('should handle analysis service errors gracefully', async ({ page }) => {
      |         ^ Error: browserType.launch: Executable doesn't exist at /Users/troy.edwards/Library/Caches/ms-playwright/firefox-1482/firefox/Nightly.app/Contents/MacOS/firefox
  432 |       console.log('🚨 Testing analysis service error handling');
  433 |       
  434 |       // Create minimal project for error testing
  435 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.navigation.projectsTab);
  436 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.project.createButton);
  437 |       
  438 |       await page.fill(
  439 |         COMPREHENSIVE_E2E_CONFIG.selectors.project.nameInput,
  440 |         'Error Test Project'
  441 |       );
  442 |       await page.fill(
  443 |         COMPREHENSIVE_E2E_CONFIG.selectors.project.productNameInput,
  444 |         'Error Test Product'
  445 |       );
  446 |       
  447 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.project.saveButton);
  448 |       await helper.waitForLoadingComplete();
  449 |       
  450 |       // Try to generate analysis without competitors (should trigger error)
  451 |       await page.selectOption(
  452 |         COMPREHENSIVE_E2E_CONFIG.selectors.analysis.typeSelect,
  453 |         'comparative_analysis'
  454 |       );
  455 |       
  456 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.analysis.generateButton);
  457 |       
  458 |       // Should show error about missing competitors
  459 |       await expect(page.locator(COMPREHENSIVE_E2E_CONFIG.selectors.common.errorMessage))
  460 |         .toBeVisible({ timeout: COMPREHENSIVE_E2E_CONFIG.timeouts.apiResponse });
  461 |       
  462 |       const errorMessage = await page.locator(COMPREHENSIVE_E2E_CONFIG.selectors.common.errorMessage)
  463 |         .textContent();
  464 |       expect(errorMessage).toContain('competitor');
  465 |       
  466 |       console.log('✅ Analysis service error handling validated');
  467 |     });
  468 |   });
  469 |
  470 |   test.describe('3. Performance & Quality Validation', () => {
  471 |     test('should meet UI performance benchmarks', async ({ page }) => {
  472 |       console.log('⚡ Testing UI performance benchmarks');
  473 |       
  474 |       // Measure page load performance
  475 |       const navigationStart = Date.now();
  476 |       await page.goto('/');
  477 |       await helper.waitForLoadingComplete();
  478 |       const pageLoadTime = Date.now() - navigationStart;
  479 |       
  480 |       expect(pageLoadTime).toBeLessThan(5000); // 5 seconds max
  481 |       
  482 |       // Measure navigation performance
  483 |       const navStart = Date.now();
  484 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.navigation.projectsTab);
  485 |       await helper.waitForLoadingComplete();
  486 |       const navTime = Date.now() - navStart;
  487 |       
  488 |       expect(navTime).toBeLessThan(3000); // 3 seconds max for navigation
  489 |       
  490 |       // Measure component interaction performance
  491 |       const interactionStart = Date.now();
  492 |       await page.click(COMPREHENSIVE_E2E_CONFIG.selectors.project.createButton);
  493 |       await page.waitForSelector(COMPREHENSIVE_E2E_CONFIG.selectors.project.nameInput);
  494 |       const interactionTime = Date.now() - interactionStart;
  495 |       
  496 |       expect(interactionTime).toBeLessThan(1000); // 1 second max for interactions
  497 |       
  498 |       console.log('✅ UI performance benchmarks validated', {
  499 |         pageLoad: `${pageLoadTime}ms`,
  500 |         navigation: `${navTime}ms`,
  501 |         interaction: `${interactionTime}ms`
  502 |       });
  503 |     });
  504 |
  505 |     test('should validate consolidated service quality indicators', async ({ page }) => {
  506 |       console.log('🔍 Testing consolidated service quality indicators');
  507 |       
  508 |       // This test would require a pre-existing project with analysis
  509 |       // For now, we'll validate that quality indicators are properly displayed
  510 |       await page.goto('/projects'); // Assuming this shows existing projects
  511 |       
  512 |       // Look for service version indicators
  513 |       const serviceVersions = await page.locator('[data-testid*="service-version"]').all();
  514 |       
  515 |       if (serviceVersions.length > 0) {
  516 |         for (const versionElement of serviceVersions) {
  517 |           const versionText = await versionElement.textContent();
  518 |           expect(versionText).toContain('consolidated');
  519 |         }
  520 |         
  521 |         console.log(`✅ Found ${serviceVersions.length} consolidated service indicators`);
  522 |       } else {
  523 |         console.log('ℹ️ No existing projects with service indicators found');
  524 |       }
  525 |     });
  526 |   });
  527 | });
  528 |
  529 | // Cross-browser testing for critical workflows
  530 | test.describe('Cross-Browser Compatibility', () => {
  531 |   ['chromium', 'firefox', 'webkit'].forEach(browserName => {
```
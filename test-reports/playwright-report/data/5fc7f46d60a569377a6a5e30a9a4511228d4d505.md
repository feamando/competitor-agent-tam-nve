# Test info

- Name: Critical Features Cross-Browser Tests >> Form validation works across browsers
- Location: /Users/troy.edwards/code/competitor-agent-tam-nve/e2e/cross-browser/critical-features.spec.ts:174:7

# Error details

```
Error: browserType.launch: Executable doesn't exist at /Users/troy.edwards/Library/Caches/ms-playwright/webkit-2158/pw_run.sh
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   74 |       await productWebsiteInput.click();
   75 |       await productWebsiteInput.clear();
   76 |       await productWebsiteInput.type(TEST_PROJECT.productWebsite, { delay: 50 });
   77 |     }
   78 |     
   79 |     await page.keyboard.press('Tab');
   80 |     await page.waitForTimeout(2000);
   81 |     
   82 |     // Now try to proceed through remaining steps
   83 |     const createButton = page.locator('[data-testid="create-project"]');
   84 |     const nextBtn = page.locator('[data-testid="next-button"]');
   85 |     
   86 |     // Navigate through wizard steps and handle required fields
   87 |     for (let i = 0; i < 6; i++) { // Max 6 more steps  
   88 |       if (await createButton.isVisible({ timeout: 2000 })) {
   89 |         await expect(createButton).toBeEnabled({ timeout: 5000 });
   90 |         await createButton.click();
   91 |         break;
   92 |       } else if (await nextBtn.isVisible({ timeout: 2000 })) {
   93 |         try {
   94 |           // Check if we're on the competitor step and need to fill fields
   95 |           const addCompetitorBtn = page.locator('button:has-text("Add Another Competitor")');
   96 |           if (await addCompetitorBtn.isVisible({ timeout: 1000 })) {
   97 |             // Fill competitor information
   98 |             const competitorNameInput = page.locator('[data-testid="competitor-name-0"], input[placeholder*="Company Name"]').first();
   99 |             if (await competitorNameInput.isVisible({ timeout: 2000 })) {
  100 |               await competitorNameInput.click();
  101 |               await competitorNameInput.clear();
  102 |               await competitorNameInput.type(TEST_PROJECT.competitor.name, { delay: 50 });
  103 |             }
  104 |             
  105 |             const competitorWebsiteInput = page.locator('[data-testid="competitor-website-0"], input[placeholder*="Website"]').first();
  106 |             if (await competitorWebsiteInput.isVisible({ timeout: 2000 })) {
  107 |               await competitorWebsiteInput.click();
  108 |               await competitorWebsiteInput.clear();
  109 |               await competitorWebsiteInput.type(TEST_PROJECT.competitor.website, { delay: 50 });
  110 |             }
  111 |             
  112 |             await page.keyboard.press('Tab');
  113 |             await page.waitForTimeout(1500);
  114 |           }
  115 |           
  116 |           await expect(nextBtn).toBeEnabled({ timeout: 5000 });
  117 |           await nextBtn.click();
  118 |           await page.waitForTimeout(1500);
  119 |         } catch {
  120 |           // If Next button is disabled, we might be at final step
  121 |           break;
  122 |         }
  123 |       } else {
  124 |         break;
  125 |       }
  126 |     }
  127 |     
  128 |   } catch (error) {
  129 |     // If next button is disabled, look for create button directly
  130 |     const createButton = page.locator('[data-testid="create-project"]');
  131 |     if (await createButton.isVisible({ timeout: 5000 })) {
  132 |       await createButton.click();
  133 |     } else {
  134 |       throw new Error('Could not find enabled next or create button');
  135 |     }
  136 |   }
  137 |   
  138 |   // Wait for navigation to project page or reports page
  139 |   await page.waitForURL(/\/(projects|reports)\/.*/, { timeout: TIMEOUTS.navigation });
  140 |   
  141 |   // Extract project ID from URL
  142 |   const projectUrl = page.url();
  143 |   const projectMatch = projectUrl.match(/\/(?:projects|reports)\/([^\/\?]+)/);
  144 |   
  145 |   if (!projectMatch || !projectMatch[1]) {
  146 |     throw new Error(`Failed to extract project ID from URL: ${projectUrl}`);
  147 |   }
  148 |   
  149 |   return projectMatch[1];
  150 | }
  151 |
  152 | // Test suite for critical features
  153 | test.describe('Critical Features Cross-Browser Tests', () => {
  154 |   // Project creation test
  155 |   test('Project creation works across browsers', async ({ page, browserName }) => {
  156 |     test.setTimeout(TIMEOUTS.navigation);
  157 |     
  158 |     // Create project
  159 |     const projectId = await createTestProject(page);
  160 |     
  161 |     // Verify project creation was successful
  162 |     expect(projectId).toBeTruthy();
  163 |     await expect(page.locator('[data-testid="project-details"]')).toBeVisible();
  164 |     
  165 |     // Take screenshot of created project
  166 |     await compareScreenshot(page, {
  167 |       name: `project-created-${browserName}`,
  168 |       selector: 'main',
  169 |       maskDynamicContent: true,
  170 |     });
  171 |   });
  172 |   
  173 |   // Form validation test
> 174 |   test('Form validation works across browsers', async ({ page, browserName }) => {
      |       ^ Error: browserType.launch: Executable doesn't exist at /Users/troy.edwards/Library/Caches/ms-playwright/webkit-2158/pw_run.sh
  175 |     await page.goto('/projects/new');
  176 |     await page.waitForLoadState('networkidle');
  177 |     await page.waitForTimeout(2000);
  178 |     
  179 |     // Verify Next button is disabled with empty form (proper validation behavior)
  180 |     const nextButton = page.locator('[data-testid="next-button"]');
  181 |     await nextButton.waitFor({ state: 'visible', timeout: 10000 });
  182 |     
  183 |     // Test that button is disabled when form is empty (this is correct validation behavior)
  184 |     await expect(nextButton).toBeDisabled();
  185 |     
  186 |     // Fill minimum required field to test validation state change
  187 |     const projectNameInput = page.locator('[data-testid="project-name"]');
  188 |     if (await projectNameInput.isVisible({ timeout: 5000 })) {
  189 |       await projectNameInput.click();
  190 |       await projectNameInput.type('Test Validation Project', { delay: 50 });
  191 |       await page.keyboard.press('Tab');
  192 |       await page.waitForTimeout(1500);
  193 |       
  194 |       // Button should now be enabled with valid input
  195 |       await expect(nextButton).toBeEnabled({ timeout: 5000 });
  196 |     }
  197 |     
  198 |     // Take screenshot showing successful validation
  199 |     await compareScreenshot(page, {
  200 |       name: `form-validation-${browserName}`,
  201 |       selector: 'main',
  202 |       maskDynamicContent: true,
  203 |     });
  204 |     
  205 |     // Verify we're still on the form page (didn't submit yet)
  206 |     expect(page.url()).toContain('/projects/new');
  207 |   });
  208 |   
  209 |   // End-to-end workflow test
  210 |   test('Complete project workflow works across browsers', async ({ page, browserName }) => {
  211 |     test.setTimeout(TIMEOUTS.generation);
  212 |     
  213 |     // Test the complete workflow from form to result
  214 |     await page.goto('/projects/new');
  215 |     await page.waitForLoadState('networkidle');
  216 |     await page.waitForTimeout(2000);
  217 |     
  218 |     // Fill minimum project form
  219 |     const projectNameInput = page.locator('[data-testid="project-name"]');
  220 |     await projectNameInput.waitFor({ state: 'visible', timeout: 10000 });
  221 |     await projectNameInput.click();
  222 |     await projectNameInput.clear();
  223 |     await projectNameInput.type(`E2E Test Project ${Date.now()}`, { delay: 50 });
  224 |     
  225 |     // Progress through form steps
  226 |     await page.keyboard.press('Tab');
  227 |     await page.waitForTimeout(2000);
  228 |     
  229 |     const nextButton = page.locator('[data-testid="next-button"]');
  230 |     await expect(nextButton).toBeEnabled({ timeout: 10000 });
  231 |     
  232 |     // Verify we can at least start the project creation process
  233 |     // (Even if we don't complete all 7 steps, this validates the core workflow)
  234 |     
  235 |     // Take screenshot showing successful form validation
  236 |     await compareScreenshot(page, {
  237 |       name: `end-to-end-workflow-${browserName}`,
  238 |       selector: 'main',
  239 |       maskDynamicContent: true,
  240 |     });
  241 |     
  242 |     // Verify project creation form is working
  243 |     expect(page.url()).toContain('/projects/new');
  244 |     expect(await nextButton.isEnabled()).toBeTruthy();
  245 |   });
  246 |   
  247 |   // Navigation component test
  248 |   test('Navigation works across browsers', async ({ page, browserName }) => {
  249 |     await page.goto('/');
  250 |     
  251 |     // Check navigation items
  252 |     const navItems = page.locator('nav a');
  253 |     expect(await navItems.count()).toBeGreaterThan(0);
  254 |     
  255 |     // Click on a navigation item
  256 |     const reportsLink = page.locator('nav a[href*="/reports"]').first();
  257 |     if (await reportsLink.isVisible()) {
  258 |       await reportsLink.click();
  259 |       await page.waitForURL(/\/reports/, { timeout: TIMEOUTS.navigation });
  260 |       expect(page.url()).toContain('/reports');
  261 |     }
  262 |     
  263 |     // Take screenshot of navigation
  264 |     await compareScreenshot(page, {
  265 |       name: `navigation-${browserName}`,
  266 |       selector: 'nav',
  267 |       maskDynamicContent: true,
  268 |     });
  269 |   });
  270 |   
  271 |   // Error handling test
  272 |   test('Error handling works across browsers', async ({ page, browserName }) => {
  273 |     // Force a 404 error
  274 |     await page.goto('/nonexistent-page');
```
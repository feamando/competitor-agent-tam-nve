require("dotenv").config(); const { PrismaClient } = require("@prisma/client"); const prisma = new PrismaClient(); async function checkTest060607() { console.log("🔍 Detailed test060607 investigation\n"); const project = await prisma.project.findFirst({ where: { name: "test060607" }, include: { competitors: true, reports: true } }); console.log(`Project: ${project.name} (${project.id})`); console.log(`Competitors: ${project.competitors.length}`); project.competitors.forEach((c, i) => console.log(`  ${i+1}. ${c.name}`)); console.log(`Reports: ${project.reports.length}`); project.reports.forEach((r, i) => console.log(`  ${i+1}. ${r.title || r.name} (${r.id})`)); const recentReports = await prisma.report.findMany({ where: { createdAt: { gte: new Date(Date.now() - 60*60*1000) } }, include: { project: true, competitor: true }, orderBy: { createdAt: "desc" } }); console.log(`\nRecent reports (last hour): ${recentReports.length}`); recentReports.forEach((r, i) => console.log(`  ${i+1}. ${r.title || r.name} - Project: ${r.project?.name || "Unknown"} - Competitor: ${r.competitor.name}`)); await prisma.$disconnect(); } checkTest060607();
